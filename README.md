# 阿乔冒险游戏 (A-Qiao Adventure Game)

一个基于EasyX图形库开发的2D平台跳跃游戏，主角是可爱的角色阿乔。游戏包含多个关卡，每个关卡都有独特的昼夜循环机制和挑战。

## 🎮 游戏特色

### 核心机制
- **昼夜循环系统**：按空格键切换白天/黑夜模式
- **动态障碍物**：不同时间段障碍物会出现/消失
- **智能敌人AI**：乌鸦在白天中立可踩踏，夜晚变为敌对移动
- **收集系统**：收集豆腐、勾玉等道具解锁新区域
- **物理引擎**：完整的跳跃、重力、碰撞检测系统

### 角色系统
- **主角阿乔**：69x69像素的可爱角色
- **移动控制**：A/D键左右移动，W键跳跃
- **跳跃机制**：支持变高跳跃和平台碰撞检测
- **语音反馈**：跳跃时播放角色语音

## 🗺️ 关卡设计

### 第一关 - 基础训练
**白天模式：**
- 左侧高墙障碍 (174,300)
- 右侧二楼台阶 (820,320)
- 两个蘑菇敌人巡逻

**夜晚模式：**
- 所有障碍物消失
- 透明区域系统激活
- 蘑菇敌人行为改变

### 第二关 - 昼夜挑战
**地形特色：**
- 角色起始位置：(53,445)
- 地面高度：y=445
- 小凸起平台：x=149-174, 高度27

**白天模式：**
- 台阶2：(56,227) 95x27
- 台阶3：(56,200) 95x27
- 台阶4：(895,150) 120x15
- 鸟居：台阶4右侧，通关点
- 竖障碍：(896,80) 需要勾玉才能通过
- 豆腐道具：台阶3上方

**夜晚模式：**
- 台阶1：(220,337) 95x23
- 勾玉道具：台阶3上方（与豆腐同位置）
- 乌鸦变为敌对状态

**通关条件：**
- 收集豆腐解锁鸟居
- 收集勾玉移除竖障碍
- 在鸟居处按F键通关

## 🎯 游戏机制详解

### 昼夜系统
```cpp
// 空格键切换昼夜
isDaytime = !isDaytime;
updateLevelData(); // 动态更新障碍物
```

### 敌人AI系统
- **乌鸦（白天）**：中立状态，可作为移动平台踩踏
- **乌鸦（夜晚）**：敌对状态，接触即死亡
- **位置保持**：切换昼夜时乌鸦保持当前位置

### 道具收集系统
- **豆腐**：白天在台阶3出现，解锁通关权限
- **勾玉**：夜晚在台阶3出现，移除竖障碍
- **精确碰撞检测**：确保只有正确位置才能收集

### 障碍物动态系统
```cpp
// 根据时间和道具状态动态移除障碍
if (hasEatenGouyu) {
    obstacles.erase(/* 移除竖障碍 */);
}
```

## 🎨 资源文件

### 图片资源
```
pictures/
├── 1/
│   ├── daytime.png      # 第一关白天背景
│   └── evening.png      # 第一关夜晚背景
├── 2/
│   ├── daytime.png      # 第二关白天背景
│   └── evening.png      # 第二关夜晚背景
├── character.png        # 主角阿乔
├── tofu.png            # 豆腐道具
├── tofu-mask.png       # 豆腐蒙版
├── gouyu.png           # 勾玉道具
├── gouyu-night-mask.png # 勾玉蒙版
├── niaoju.png          # 鸟居
├── niaoju-mask.png     # 鸟居蒙版
├── wuya.png            # 乌鸦
└── wuya-mask.png       # 乌鸦蒙版
```

### 音频资源
```
sounds/
├── background.wav       # 背景音乐
└── character_voice.wav  # 角色语音
```

## 🛠️ 技术实现

### 开发环境
- **图形库**：EasyX Graphics Library
- **编译器**：MinGW-w64 GCC
- **平台**：Windows
- **语言**：C++17

### 核心技术
- **批量绘制**：BeginBatchDraw/EndBatchDraw优化性能
- **图像处理**：SRCAND/SRCPAINT实现透明效果
- **音频系统**：Windows MCI多媒体接口
- **碰撞检测**：AABB包围盒算法
- **状态机**：关卡、昼夜、敌人状态管理

### 编译命令
```bash
g++ -o game0.exe game0.cpp -lgraphics64 -luuid -lmsimg32 -lgdi32 -limm32 -lole32 -loleaut32 -lwinmm -lgdiplus
```

## 🎮 操作指南

### 基本操作
- **A键**：向左移动
- **D键**：向右移动
- **W键**：跳跃
- **空格键**：切换昼夜模式
- **F键**：在特定位置通关
- **F1键**：显示/隐藏调试信息

### 游戏提示
1. 利用昼夜切换机制通过不同障碍
2. 白天收集豆腐，夜晚收集勾玉
3. 观察乌鸦行为变化，合理利用
4. 注意平台出现/消失的时机
5. 收集所需道具后寻找通关点

## 🚀 未来计划

- [ ] 添加更多关卡
- [ ] 实现无尽跑酷模式
- [ ] 增加角色技能系统
- [ ] 优化图形效果
- [ ] 添加存档系统
- [ ] 支持手柄操作

## 📝 开发日志

### 最新更新 (v2.0)
- ✅ 完善第二关昼夜机制
- ✅ 修复碰撞检测系统
- ✅ 优化敌人AI逻辑
- ✅ 添加道具收集系统
- ✅ 实现动态障碍物系统
- ✅ 修复第一关障碍物昼夜切换
- ✅ 完善竖障碍穿透机制

### 技术特色
- **单文件架构**：使用`game0.cpp`单文件实现，便于编译和分发
- **模块化逻辑**：虽然是单文件，但代码结构清晰，功能模块分明
- **高效渲染**：使用批量绘制和图像蒙版技术优化性能
- **智能AI**：敌人具有昼夜行为差异和路径寻找能力

## 🎯 关卡攻略

### 第一关攻略
1. **白天模式**：利用台阶跳跃，避开蘑菇敌人
2. **夜晚模式**：所有障碍消失，但要小心透明区域
3. **通关技巧**：合理利用昼夜切换，找到最佳路径

### 第二关攻略
1. **收集豆腐**：白天在台阶3上收集豆腐
2. **收集勾玉**：夜晚在同一位置收集勾玉
3. **利用乌鸦**：白天可踩踏乌鸦作为移动平台
4. **通关路径**：收集豆腐→移除竖障碍→到达鸟居→按F通关

## 🔧 故障排除

### 常见问题
1. **编译错误**：确保安装了EasyX图形库和MinGW编译器
2. **图片不显示**：检查pictures文件夹路径是否正确
3. **音频无法播放**：确保sounds文件夹中有对应的wav文件
4. **游戏卡顿**：尝试关闭其他程序释放内存

### 性能优化
- 使用批量绘制减少闪烁
- 合理使用图像蒙版提高透明效果
- 优化碰撞检测算法减少计算量

---

**作者**：游戏开发者
**版本**：v2.0
**最后更新**：2024年12月
**文件**：game0.cpp (单文件实现)

享受阿乔的冒险之旅！🎮✨
